-- Internationalization Schema
-- This file contains the database schema for internationalization features

-- Locales table
CREATE TABLE IF NOT EXISTS locales (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    code VARCHAR(10) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    native_name VARCHAR(100) NOT NULL,
    direction VARCHAR(3) NOT NULL CHECK (direction IN ('ltr', 'rtl')),
    currency VARCHAR(3) NOT NULL,
    date_format VARCHAR(20) NOT NULL,
    number_format VARCHAR(20) NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Translations table
CREATE TABLE IF NOT EXISTS translations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    key VARCHAR(255) NOT NULL,
    locale VARCHAR(10) NOT NULL,
    namespace VARCHAR(100) NOT NULL DEFAULT 'translation',
    value TEXT NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(key, locale, namespace)
);

-- User preferences table
CREATE TABLE IF NOT EXISTS user_preferences (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    language VARCHAR(10) NOT NULL DEFAULT 'en',
    timezone VARCHAR(50) NOT NULL DEFAULT 'UTC',
    currency VARCHAR(3) NOT NULL DEFAULT 'USD',
    date_format VARCHAR(20) NOT NULL DEFAULT 'MM/DD/YYYY',
    number_format VARCHAR(20) NOT NULL DEFAULT 'en-US',
    direction VARCHAR(3) NOT NULL DEFAULT 'ltr' CHECK (direction IN ('ltr', 'rtl')),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id)
);

-- Indexes for better performance
CREATE INDEX IF NOT EXISTS idx_locales_code ON locales(code);
CREATE INDEX IF NOT EXISTS idx_locales_active ON locales(is_active);
CREATE INDEX IF NOT EXISTS idx_translations_locale ON translations(locale);
CREATE INDEX IF NOT EXISTS idx_translations_namespace ON translations(namespace);
CREATE INDEX IF NOT EXISTS idx_translations_key ON translations(key);
CREATE INDEX IF NOT EXISTS idx_translations_active ON translations(is_active);
CREATE INDEX IF NOT EXISTS idx_user_preferences_user_id ON user_preferences(user_id);

-- Insert default locales
INSERT INTO locales (code, name, native_name, direction, currency, date_format, number_format, is_active) VALUES
('en', 'English', 'English', 'ltr', 'USD', 'MM/DD/YYYY', 'en-US', true),
('es', 'Spanish', 'Español', 'ltr', 'EUR', 'DD/MM/YYYY', 'es-ES', true),
('fr', 'French', 'Français', 'ltr', 'EUR', 'DD/MM/YYYY', 'fr-FR', true),
('de', 'German', 'Deutsch', 'ltr', 'EUR', 'DD.MM.YYYY', 'de-DE', true),
('ar', 'Arabic', 'العربية', 'rtl', 'SAR', 'DD/MM/YYYY', 'ar-SA', true),
('he', 'Hebrew', 'עברית', 'rtl', 'ILS', 'DD/MM/YYYY', 'he-IL', true)
ON CONFLICT (code) DO NOTHING;

-- Insert default translations for English
INSERT INTO translations (key, locale, namespace, value, is_active) VALUES
('common.save', 'en', 'translation', 'Save', true),
('common.cancel', 'en', 'translation', 'Cancel', true),
('common.delete', 'en', 'translation', 'Delete', true),
('common.edit', 'en', 'translation', 'Edit', true),
('common.create', 'en', 'translation', 'Create', true),
('common.update', 'en', 'translation', 'Update', true),
('common.search', 'en', 'translation', 'Search', true),
('common.filter', 'en', 'translation', 'Filter', true),
('common.export', 'en', 'translation', 'Export', true),
('common.import', 'en', 'translation', 'Import', true),
('common.download', 'en', 'translation', 'Download', true),
('common.upload', 'en', 'translation', 'Upload', true),
('common.submit', 'en', 'translation', 'Submit', true),
('common.reset', 'en', 'translation', 'Reset', true),
('common.close', 'en', 'translation', 'Close', true),
('common.back', 'en', 'translation', 'Back', true),
('common.next', 'en', 'translation', 'Next', true),
('common.previous', 'en', 'translation', 'Previous', true),
('common.finish', 'en', 'translation', 'Finish', true),
('common.loading', 'en', 'translation', 'Loading...', true),
('common.error', 'en', 'translation', 'Error', true),
('common.success', 'en', 'translation', 'Success', true),
('common.warning', 'en', 'translation', 'Warning', true),
('common.info', 'en', 'translation', 'Information', true),
('common.yes', 'en', 'translation', 'Yes', true),
('common.no', 'en', 'translation', 'No', true),
('common.ok', 'en', 'translation', 'OK', true),
('common.confirm', 'en', 'translation', 'Confirm', true),
('common.select', 'en', 'translation', 'Select', true),
('common.all', 'en', 'translation', 'All', true),
('common.none', 'en', 'translation', 'None', true),
('common.required', 'en', 'translation', 'Required', true),
('common.optional', 'en', 'translation', 'Optional', true),
('common.name', 'en', 'translation', 'Name', true),
('common.email', 'en', 'translation', 'Email', true),
('common.phone', 'en', 'translation', 'Phone', true),
('common.address', 'en', 'translation', 'Address', true),
('common.date', 'en', 'translation', 'Date', true),
('common.amount', 'en', 'translation', 'Amount', true),
('common.description', 'en', 'translation', 'Description', true),
('common.status', 'en', 'translation', 'Status', true),
('common.actions', 'en', 'translation', 'Actions', true),
('common.created', 'en', 'translation', 'Created', true),
('common.updated', 'en', 'translation', 'Updated', true),
('common.deleted', 'en', 'translation', 'Deleted', true)
ON CONFLICT (key, locale, namespace) DO NOTHING;

-- Insert default translations for Spanish
INSERT INTO translations (key, locale, namespace, value, is_active) VALUES
('common.save', 'es', 'translation', 'Guardar', true),
('common.cancel', 'es', 'translation', 'Cancelar', true),
('common.delete', 'es', 'translation', 'Eliminar', true),
('common.edit', 'es', 'translation', 'Editar', true),
('common.create', 'es', 'translation', 'Crear', true),
('common.update', 'es', 'translation', 'Actualizar', true),
('common.search', 'es', 'translation', 'Buscar', true),
('common.filter', 'es', 'translation', 'Filtrar', true),
('common.export', 'es', 'translation', 'Exportar', true),
('common.import', 'es', 'translation', 'Importar', true),
('common.download', 'es', 'translation', 'Descargar', true),
('common.upload', 'es', 'translation', 'Subir', true),
('common.submit', 'es', 'translation', 'Enviar', true),
('common.reset', 'es', 'translation', 'Restablecer', true),
('common.close', 'es', 'translation', 'Cerrar', true),
('common.back', 'es', 'translation', 'Atrás', true),
('common.next', 'es', 'translation', 'Siguiente', true),
('common.previous', 'es', 'translation', 'Anterior', true),
('common.finish', 'es', 'translation', 'Finalizar', true),
('common.loading', 'es', 'translation', 'Cargando...', true),
('common.error', 'es', 'translation', 'Error', true),
('common.success', 'es', 'translation', 'Éxito', true),
('common.warning', 'es', 'translation', 'Advertencia', true),
('common.info', 'es', 'translation', 'Información', true),
('common.yes', 'es', 'translation', 'Sí', true),
('common.no', 'es', 'translation', 'No', true),
('common.ok', 'es', 'translation', 'OK', true),
('common.confirm', 'es', 'translation', 'Confirmar', true),
('common.select', 'es', 'translation', 'Seleccionar', true),
('common.all', 'es', 'translation', 'Todos', true),
('common.none', 'es', 'translation', 'Ninguno', true),
('common.required', 'es', 'translation', 'Requerido', true),
('common.optional', 'es', 'translation', 'Opcional', true),
('common.name', 'es', 'translation', 'Nombre', true),
('common.email', 'es', 'translation', 'Correo electrónico', true),
('common.phone', 'es', 'translation', 'Teléfono', true),
('common.address', 'es', 'translation', 'Dirección', true),
('common.date', 'es', 'translation', 'Fecha', true),
('common.amount', 'es', 'translation', 'Cantidad', true),
('common.description', 'es', 'translation', 'Descripción', true),
('common.status', 'es', 'translation', 'Estado', true),
('common.actions', 'es', 'translation', 'Acciones', true),
('common.created', 'es', 'translation', 'Creado', true),
('common.updated', 'es', 'translation', 'Actualizado', true),
('common.deleted', 'es', 'translation', 'Eliminado', true)
ON CONFLICT (key, locale, namespace) DO NOTHING;

-- Insert default translations for French
INSERT INTO translations (key, locale, namespace, value, is_active) VALUES
('common.save', 'fr', 'translation', 'Enregistrer', true),
('common.cancel', 'fr', 'translation', 'Annuler', true),
('common.delete', 'fr', 'translation', 'Supprimer', true),
('common.edit', 'fr', 'translation', 'Modifier', true),
('common.create', 'fr', 'translation', 'Créer', true),
('common.update', 'fr', 'translation', 'Mettre à jour', true),
('common.search', 'fr', 'translation', 'Rechercher', true),
('common.filter', 'fr', 'translation', 'Filtrer', true),
('common.export', 'fr', 'translation', 'Exporter', true),
('common.import', 'fr', 'translation', 'Importer', true),
('common.download', 'fr', 'translation', 'Télécharger', true),
('common.upload', 'fr', 'translation', 'Téléverser', true),
('common.submit', 'fr', 'translation', 'Soumettre', true),
('common.reset', 'fr', 'translation', 'Réinitialiser', true),
('common.close', 'fr', 'translation', 'Fermer', true),
('common.back', 'fr', 'translation', 'Retour', true),
('common.next', 'fr', 'translation', 'Suivant', true),
('common.previous', 'fr', 'translation', 'Précédent', true),
('common.finish', 'fr', 'translation', 'Terminer', true),
('common.loading', 'fr', 'translation', 'Chargement...', true),
('common.error', 'fr', 'translation', 'Erreur', true),
('common.success', 'fr', 'translation', 'Succès', true),
('common.warning', 'fr', 'translation', 'Avertissement', true),
('common.info', 'fr', 'translation', 'Information', true),
('common.yes', 'fr', 'translation', 'Oui', true),
('common.no', 'fr', 'translation', 'Non', true),
('common.ok', 'fr', 'translation', 'OK', true),
('common.confirm', 'fr', 'translation', 'Confirmer', true),
('common.select', 'fr', 'translation', 'Sélectionner', true),
('common.all', 'fr', 'translation', 'Tous', true),
('common.none', 'fr', 'translation', 'Aucun', true),
('common.required', 'fr', 'translation', 'Requis', true),
('common.optional', 'fr', 'translation', 'Optionnel', true),
('common.name', 'fr', 'translation', 'Nom', true),
('common.email', 'fr', 'translation', 'E-mail', true),
('common.phone', 'fr', 'translation', 'Téléphone', true),
('common.address', 'fr', 'translation', 'Adresse', true),
('common.date', 'fr', 'translation', 'Date', true),
('common.amount', 'fr', 'translation', 'Montant', true),
('common.description', 'fr', 'translation', 'Description', true),
('common.status', 'fr', 'translation', 'Statut', true),
('common.actions', 'fr', 'translation', 'Actions', true),
('common.created', 'fr', 'translation', 'Créé', true),
('common.updated', 'fr', 'translation', 'Mis à jour', true),
('common.deleted', 'fr', 'translation', 'Supprimé', true)
ON CONFLICT (key, locale, namespace) DO NOTHING;

-- Insert default translations for German
INSERT INTO translations (key, locale, namespace, value, is_active) VALUES
('common.save', 'de', 'translation', 'Speichern', true),
('common.cancel', 'de', 'translation', 'Abbrechen', true),
('common.delete', 'de', 'translation', 'Löschen', true),
('common.edit', 'de', 'translation', 'Bearbeiten', true),
('common.create', 'de', 'translation', 'Erstellen', true),
('common.update', 'de', 'translation', 'Aktualisieren', true),
('common.search', 'de', 'translation', 'Suchen', true),
('common.filter', 'de', 'translation', 'Filtern', true),
('common.export', 'de', 'translation', 'Exportieren', true),
('common.import', 'de', 'translation', 'Importieren', true),
('common.download', 'de', 'translation', 'Herunterladen', true),
('common.upload', 'de', 'translation', 'Hochladen', true),
('common.submit', 'de', 'translation', 'Senden', true),
('common.reset', 'de', 'translation', 'Zurücksetzen', true),
('common.close', 'de', 'translation', 'Schließen', true),
('common.back', 'de', 'translation', 'Zurück', true),
('common.next', 'de', 'translation', 'Weiter', true),
('common.previous', 'de', 'translation', 'Vorherige', true),
('common.finish', 'de', 'translation', 'Beenden', true),
('common.loading', 'de', 'translation', 'Laden...', true),
('common.error', 'de', 'translation', 'Fehler', true),
('common.success', 'de', 'translation', 'Erfolg', true),
('common.warning', 'de', 'translation', 'Warnung', true),
('common.info', 'de', 'translation', 'Information', true),
('common.yes', 'de', 'translation', 'Ja', true),
('common.no', 'de', 'translation', 'Nein', true),
('common.ok', 'de', 'translation', 'OK', true),
('common.confirm', 'de', 'translation', 'Bestätigen', true),
('common.select', 'de', 'translation', 'Auswählen', true),
('common.all', 'de', 'translation', 'Alle', true),
('common.none', 'de', 'translation', 'Keine', true),
('common.required', 'de', 'translation', 'Erforderlich', true),
('common.optional', 'de', 'translation', 'Optional', true),
('common.name', 'de', 'translation', 'Name', true),
('common.email', 'de', 'translation', 'E-Mail', true),
('common.phone', 'de', 'translation', 'Telefon', true),
('common.address', 'de', 'translation', 'Adresse', true),
('common.date', 'de', 'translation', 'Datum', true),
('common.amount', 'de', 'translation', 'Betrag', true),
('common.description', 'de', 'translation', 'Beschreibung', true),
('common.status', 'de', 'translation', 'Status', true),
('common.actions', 'de', 'translation', 'Aktionen', true),
('common.created', 'de', 'translation', 'Erstellt', true),
('common.updated', 'de', 'translation', 'Aktualisiert', true),
('common.deleted', 'de', 'translation', 'Gelöscht', true)
ON CONFLICT (key, locale, namespace) DO NOTHING;

-- Insert default translations for Arabic
INSERT INTO translations (key, locale, namespace, value, is_active) VALUES
('common.save', 'ar', 'translation', 'حفظ', true),
('common.cancel', 'ar', 'translation', 'إلغاء', true),
('common.delete', 'ar', 'translation', 'حذف', true),
('common.edit', 'ar', 'translation', 'تعديل', true),
('common.create', 'ar', 'translation', 'إنشاء', true),
('common.update', 'ar', 'translation', 'تحديث', true),
('common.search', 'ar', 'translation', 'بحث', true),
('common.filter', 'ar', 'translation', 'تصفية', true),
('common.export', 'ar', 'translation', 'تصدير', true),
('common.import', 'ar', 'translation', 'استيراد', true),
('common.download', 'ar', 'translation', 'تحميل', true),
('common.upload', 'ar', 'translation', 'رفع', true),
('common.submit', 'ar', 'translation', 'إرسال', true),
('common.reset', 'ar', 'translation', 'إعادة تعيين', true),
('common.close', 'ar', 'translation', 'إغلاق', true),
('common.back', 'ar', 'translation', 'رجوع', true),
('common.next', 'ar', 'translation', 'التالي', true),
('common.previous', 'ar', 'translation', 'السابق', true),
('common.finish', 'ar', 'translation', 'إنهاء', true),
('common.loading', 'ar', 'translation', 'جاري التحميل...', true),
('common.error', 'ar', 'translation', 'خطأ', true),
('common.success', 'ar', 'translation', 'نجح', true),
('common.warning', 'ar', 'translation', 'تحذير', true),
('common.info', 'ar', 'translation', 'معلومات', true),
('common.yes', 'ar', 'translation', 'نعم', true),
('common.no', 'ar', 'translation', 'لا', true),
('common.ok', 'ar', 'translation', 'موافق', true),
('common.confirm', 'ar', 'translation', 'تأكيد', true),
('common.select', 'ar', 'translation', 'اختيار', true),
('common.all', 'ar', 'translation', 'الكل', true),
('common.none', 'ar', 'translation', 'لا شيء', true),
('common.required', 'ar', 'translation', 'مطلوب', true),
('common.optional', 'ar', 'translation', 'اختياري', true),
('common.name', 'ar', 'translation', 'الاسم', true),
('common.email', 'ar', 'translation', 'البريد الإلكتروني', true),
('common.phone', 'ar', 'translation', 'الهاتف', true),
('common.address', 'ar', 'translation', 'العنوان', true),
('common.date', 'ar', 'translation', 'التاريخ', true),
('common.amount', 'ar', 'translation', 'المبلغ', true),
('common.description', 'ar', 'translation', 'الوصف', true),
('common.status', 'ar', 'translation', 'الحالة', true),
('common.actions', 'ar', 'translation', 'الإجراءات', true),
('common.created', 'ar', 'translation', 'تم الإنشاء', true),
('common.updated', 'ar', 'translation', 'تم التحديث', true),
('common.deleted', 'ar', 'translation', 'تم الحذف', true)
ON CONFLICT (key, locale, namespace) DO NOTHING;

-- Insert default translations for Hebrew
INSERT INTO translations (key, locale, namespace, value, is_active) VALUES
('common.save', 'he', 'translation', 'שמור', true),
('common.cancel', 'he', 'translation', 'בטל', true),
('common.delete', 'he', 'translation', 'מחק', true),
('common.edit', 'he', 'translation', 'ערוך', true),
('common.create', 'he', 'translation', 'צור', true),
('common.update', 'he', 'translation', 'עדכן', true),
('common.search', 'he', 'translation', 'חפש', true),
('common.filter', 'he', 'translation', 'סנן', true),
('common.export', 'he', 'translation', 'ייצא', true),
('common.import', 'he', 'translation', 'ייבא', true),
('common.download', 'he', 'translation', 'הורד', true),
('common.upload', 'he', 'translation', 'העלה', true),
('common.submit', 'he', 'translation', 'שלח', true),
('common.reset', 'he', 'translation', 'איפוס', true),
('common.close', 'he', 'translation', 'סגור', true),
('common.back', 'he', 'translation', 'חזור', true),
('common.next', 'he', 'translation', 'הבא', true),
('common.previous', 'he', 'translation', 'הקודם', true),
('common.finish', 'he', 'translation', 'סיים', true),
('common.loading', 'he', 'translation', 'טוען...', true),
('common.error', 'he', 'translation', 'שגיאה', true),
('common.success', 'he', 'translation', 'הצלחה', true),
('common.warning', 'he', 'translation', 'אזהרה', true),
('common.info', 'he', 'translation', 'מידע', true),
('common.yes', 'he', 'translation', 'כן', true),
('common.no', 'he', 'translation', 'לא', true),
('common.ok', 'he', 'translation', 'אישור', true),
('common.confirm', 'he', 'translation', 'אשר', true),
('common.select', 'he', 'translation', 'בחר', true),
('common.all', 'he', 'translation', 'הכל', true),
('common.none', 'he', 'translation', 'אין', true),
('common.required', 'he', 'translation', 'נדרש', true),
('common.optional', 'he', 'translation', 'אופציונלי', true),
('common.name', 'he', 'translation', 'שם', true),
('common.email', 'he', 'translation', 'אימייל', true),
('common.phone', 'he', 'translation', 'טלפון', true),
('common.address', 'he', 'translation', 'כתובת', true),
('common.date', 'he', 'translation', 'תאריך', true),
('common.amount', 'he', 'translation', 'סכום', true),
('common.description', 'he', 'translation', 'תיאור', true),
('common.status', 'he', 'translation', 'סטטוס', true),
('common.actions', 'he', 'translation', 'פעולות', true),
('common.created', 'he', 'translation', 'נוצר', true),
('common.updated', 'he', 'translation', 'עודכן', true),
('common.deleted', 'he', 'translation', 'נמחק', true)
ON CONFLICT (key, locale, namespace) DO NOTHING;










